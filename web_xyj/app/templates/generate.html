{% extends "layout.html" %}
{% from 'macros.html' import add_gmodel_checkpoint, chemdraw, error_message, warning_message %}

{% block title %}
    <h1>Generate</h1>
{% endblock %}

{% block content %}

<div class="row">
    <div class="col-xs-5 col-sm-5 col-lg-5">
    {% if not config['DEMO'] %}
    {{ add_gmodel_checkpoint('generate', checkpoint_upload_warnings, checkpoint_upload_errors) }}
    <hr>
    {% endif %}

    <form id="generateForm">
        <!--Model checkpoint selector-->
        <h3>Gmodel checkpoint(s)</h3>
        <!-- <select name="checkpointName" required>
            {% for checkpoint in checkpoints %}
            <option value="{{ checkpoint[0] }}">{{ checkpoint[1] }}</option>
            {% endfor %}
        </select> -->

        <div class="custom-control custom-checkbox" name="checkpointName">
            {% for checkpoint in checkpoints %}
                {% if "generation" in checkpoint['class'] %}
                    <input type="checkbox" class="custom-control-input" value="{{checkpoint[0] }}" checked>
                    <label class="custom-control-label" for="defaultChecked2">{{checkpoint[0] }}: {{ checkpoint[1] }}</label>
                {% endif %}
            {% endfor %}
        </div>
        <br>
        <button type="submit" class="btn btn-primary btn-md" onclick="submitGenerateForm()">Generate</button>
    </form>
    </div>

    <div class="col-xs-7 col-sm-7 col-lg-7">


    </div>
</div>


<script type=text/javascript>
  function submitGenerateForm(){
    var checkedmodel = "";
    $.each($('input:checkbox:checked'),function(){
        checkedmodel += $(this).val() + ",";
    });
    var data = {"checkpointName": checkedmodel, "n_sample_per_model" : "1000", "filter": "None"};
    $.ajax({
        url: "/generate",
        type:"post",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify(data),
        dataType: "json",
        success:function(data){
            alert("success");
        },
        error:function(e){
            alert("error to generate");
        }
    });


  }
</script>

{% endblock %}
